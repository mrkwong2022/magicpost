(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bacb6"],{3971:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wbs-content"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[s("div",{staticClass:"wbs-main"},[s("div",{staticClass:"table-wp"},[s("table",{staticClass:"wbs-form-table"},[s("tr",[s("th",{staticClass:"w8em"},[t._v("功能开关")]),s("td",[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.switch,callback:function(e){t.$set(t.opt,"switch",e)},expression:"opt.switch"}}),s("span",{staticClass:"ml"},[t._v("功能已"+t._s(1==t.opt.switch?"开启":"关闭"))]),s("div",{staticClass:"description mt"},[t._v("启用下载功能后，发布文章支持填入下载链接")])],1)]),s("tr",[s("th",[t._v("是否需要登录")]),s("td",{staticClass:"info"},[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.need_member,callback:function(e){t.$set(t.opt,"need_member",e)},expression:"opt.need_member"}}),s("span",{staticClass:"ml"},[t._v("当前"+t._s(1==t.opt.need_member?"已开启登录下载，访客须注册登录后才可以下载":"关闭登录下载限制，访客无须登录即可下载")+"。")])],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("下载浮层")]),s("td",{staticClass:"info"},[s("el-radio-group",{model:{value:t.opt.sticky_mode,callback:function(e){t.$set(t.opt,"sticky_mode",e)},expression:"opt.sticky_mode"}},t._l({0:"关闭",1:"在头部",2:"在底部"},(function(e,a){return s("el-radio",{key:a,attrs:{label:a}},[t._v(t._s(e))])})),1),s("div",{staticClass:"description mt"},[t._v(" * 启用下载按钮置顶或者底部固定后，将会页面顶部或者底部展示下载按钮相关内容。如您所使用的主题已经有顶部或者底部固定栏，切勿启用该功能。 ")])],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("预设下载方式")]),s("td",{staticClass:"info"},[s("el-checkbox-group",{model:{value:t.opt.dl_type_items,callback:function(e){t.$set(t.opt,"dl_type_items",e)},expression:"opt.dl_type_items"}},t._l(t.cnf.dl_type_items,(function(e,a){return s("el-checkbox",{key:a,attrs:{label:a}},[s("span",[t._v(t._s(e))])])})),1)],1)]),s("tr",[t._m(0),t.isPro?s("td",{staticClass:"info"},[t._l(t.opt.dlt_custom,(function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.status>-1,expression:"item.status > -1"}],key:a,staticClass:"ib",class:{"ml-l":a>0}},[t.editCustomType?t._e():s("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.status,callback:function(s){t.$set(e,"status",s)},expression:"item.status"}},[t._v(t._s(e.label)+" ")]),t.editCustomType?s("el-input",{staticClass:"w8em",attrs:{size:"mini",placeholder:"名称"},model:{value:e.label,callback:function(s){t.$set(e,"label",s)},expression:"item.label"}}):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.slug,expression:"item.slug"}],staticClass:"w8em ml",attrs:{type:"hidden",size:"mini",placeholder:"英文标识"},domProps:{value:e.slug},on:{input:function(s){s.target.composing||t.$set(e,"slug",s.target.value)}}}),t.editCustomType?s("span",{staticClass:"ml ib",on:{click:function(e){return t.delDlType(a)}}},[s("i",{staticClass:"el-icon-delete"})]):t._e()],1)})),t.editCustomType?s("div",{staticClass:"ib",class:{"ml-l":t.opt.dlt_custom.length>0}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus"},on:{click:t.addDlType}},[t._v("添加")])],1):t._e(),t.editCustomType?t.opt.dlt_custom.length>0?s("span",{staticClass:"ib ml-l"},[s("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check",circle:""},on:{click:t.doSubmit}}),s("el-button",{attrs:{size:"mini",icon:"el-icon-close",circle:""},on:{click:t.doCancel}})],1):t._e():s("span",{staticClass:"ib ml-l"},[s("el-button",{attrs:{size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(e){t.editCustomType=!0}}})],1)],2):s("td",{staticClass:"info"},[t._v(" * "),s("el-link",{attrs:{type:"link"},on:{click:function(e){return t.doActivePro()}}},[t._v("激活PRO版本")]),t._v(" 即可配置更多下载方式。 ")],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("版权说明")]),s("td",[s("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:t.opt.remark,callback:function(e){t.$set(t.opt,"remark",e)},expression:"opt.remark"}}),s("div",{staticClass:"description mt"},[t._v(' * 默认及没有输入自定义内容，将显示"©下载资源版权归作者所有；本站所有资源均来源于网络，仅供学习使用，请支持正版！" ')])],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("兼容暗黑模式")]),s("td",[s("el-input",{attrs:{size:"mini",placeholder:"填写css类名，如 .wb-dm"},model:{value:t.opt.dark_mode_class,callback:function(e){t.$set(t.opt,"dark_mode_class",e)},expression:"opt.dark_mode_class"}}),t._m(1)],1)])])]),s("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1),t.$cnf.is_pro?t._e():s("wbs-more-sources"),s("wbs-ctrl-bar",{on:{submit:t.updateData}})],1)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"w8em"},[t._v("自定义方式 "),s("i",{staticClass:"tag-pro"},[t._v("Pro")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"description"},[t._v(" * 填写主题暗黑模式激活时的css类名，以响应模式间的切换。"),s("a",{attrs:{href:"https://www.wbolt.com/faq/41150.html",target:"faq"}},[t._v("如何找到暗黑模式css类名?")])])}],o={name:"MagicPostDownload",components:{},data(){const t=this;return{wb_cnf:t.$cnf,formChanged:0,isLoaded:!1,isPro:t.$cnf.is_pro,opt:{},cnf:{},customItemsNow:[],editCustomType:!1}},mounted(){this.loadData()},methods:{loadData(){const t=this;t.$api.getData({_ajax_nonce:t.$cnf._ajax_nonce,action:t.$cnf.action.act,op:"dip_setting"}).then(e=>{t.opt=e.opt,t.cnf=e.cnf,e.opt.dlt_custom&&(t.customItemsNow=JSON.parse(JSON.stringify(e.opt.dlt_custom)),0==t.customItemsNow.length&&(t.editCustomType=!0)),t.$nextTick(()=>{t.formChanged=1}),t.isLoaded=!0})},updateData(t){const e=this,s={_ajax_nonce:e.$cnf._ajax_nonce,action:e.$cnf.action.act,op:"dip_update",opt:e.opt};e.$api.saveData(s).then(s=>{e.$wbui.toast("设置保存成功"),e.formChanged=1,t&&t()})},addDlType(){const t=this;t.opt.dlt_custom.push({slug:"dlct_"+(new Date).getTime(),label:"",status:0})},delDlType(t){const e=this;e.$wbui.confirm("确认删除？",()=>{const s=e.customItemsNow.filter(s=>s.slug==e.opt.dlt_custom[t].slug);s.length?e.opt.dlt_custom[t].status=-1:e.opt.dlt_custom.splice(t,1)})},doSubmit(){const t=this;let e=!1;t.opt.dlt_custom.forEach(t=>{t.label||(e=!0)}),e?t.$wbui.alert("请填写自定义下载方式名称"):t.editCustomType=!t.editCustomType},doCancel(){const t=this;t.editCustomType=!1}},watch:{opt:{handler(){this.formChanged++},deep:!0}},beforeRouteLeave(t,e,s){const a=this;a.formChanged>1?a.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes(){return s(!1),a.updateData((function(){s()})),!1},no(){return s(),!1}}):s()}},l=o,c=s("2877"),n=Object(c["a"])(l,a,i,!1,null,null,null);e["default"]=n.exports}}]);