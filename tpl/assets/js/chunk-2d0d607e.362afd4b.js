(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d607e"],{"718f":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wbs-content"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[s("div",{staticClass:"wbs-main setting-box"},[t.isLoaded?s("table",{staticClass:"wbs-form-table"},[s("tr",[s("th",{staticClass:"w8em"},[t._v("功能开关")]),s("td",{staticClass:"info"},[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.toc_switch,callback:function(e){t.$set(t.opt,"toc_switch",e)},expression:"opt.toc_switch"}}),s("span",{staticClass:"ml"},[t._v("功能已"+t._s(1==t.opt.toc_switch?"开启":"关闭"))]),s("div",{staticClass:"description mt"})],1)]),s("tr",[s("th",[t._v("自动目录")]),s("td",{staticClass:"info"},[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.auto_insert_content,callback:function(e){t.$set(t.opt,"auto_insert_content",e)},expression:"opt.auto_insert_content"}}),s("span",{staticClass:"ml"},[t._v("当前"+t._s(1==t.opt.auto_insert_content?"已启用，自动抽离Heading标题形成内容目录":"已关闭，可手动将短代码 [magicpost_toc_items] 插入内容适当位置，作为目录模块")+"。")])],1)]),s("tr",[s("th",[t._v("目录标题")]),s("td",[s("el-input",{attrs:{size:"small"},model:{value:t.opt.toc_label,callback:function(e){t.$set(t.opt,"toc_label",e)},expression:"opt.toc_label"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("目录结构")]),s("td",{staticClass:"info"},[s("el-radio-group",{model:{value:t.opt.ct_mode,callback:function(e){t.$set(t.opt,"ct_mode",e)},expression:"opt.ct_mode"}},t._l(t.cnf.ct_mode,(function(e,o){return s("el-radio",{key:o,attrs:{label:o}},[t._v(t._s(e))])})),1)],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("目录风格")]),s("td",[s("div",{staticClass:"with-sub-form-table"},[s("table",{staticClass:"wbs-form-table-sub"},[s("tbody",[s("tr",[s("th",{staticClass:"row",staticStyle:{width:"10em"}},[t._v("正文目录展开状态")]),s("td",[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.style_content_unfold,callback:function(e){t.$set(t.opt,"style_content_unfold",e)},expression:"opt.style_content_unfold"}}),s("span",{staticClass:"ml"},[t._v("默认"+t._s(0==t.opt.style_content_unfold?"不展开":"展开"))])],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("正文最大显示条目数")]),s("td",[s("el-input-number",{attrs:{size:"small"},model:{value:t.opt.style_content_max,callback:function(e){t.$set(t.opt,"style_content_max",e)},expression:"opt.style_content_max"}})],1)]),t._e(),s("tr",[s("th",{staticClass:"row"},[t._v("小工具最大显示条目数")]),s("td",{staticClass:"info"},[s("el-input-number",{attrs:{size:"small"},model:{value:t.opt.style_widget_max,callback:function(e){t.$set(t.opt,"style_widget_max",e)},expression:"opt.style_widget_max"}})],1)])])])])])]),s("tr",[s("th",[t._v("排版样式")]),s("td",[s("el-tabs",{staticClass:"custom-opt-pane",attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"正文目录"}},[s("table",{staticClass:"wbs-form-table-sub"},[s("tr",[s("th",{staticClass:"row w6em"},[t._v("背景色")]),s("td",[s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.opt.style.content.background_color,callback:function(e){t.$set(t.opt.style.content,"background_color",e)},expression:"opt.style.content.background_color"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("边框线")]),s("td",[s("el-input-number",{attrs:{min:0,max:20,label:"px",size:"mini"},model:{value:t.opt.style.content.border_width,callback:function(e){t.$set(t.opt.style.content,"border_width",e)},expression:"opt.style.content.border_width"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("边框色")]),s("td",[s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.opt.style.content.border_color,callback:function(e){t.$set(t.opt.style.content,"border_color",e)},expression:"opt.style.content.border_color"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("上边距")]),s("td",[s("el-input-number",{attrs:{min:0,max:100,label:"px",size:"mini"},model:{value:t.opt.style.content.margin_top,callback:function(e){t.$set(t.opt.style.content,"margin_top",e)},expression:"opt.style.content.margin_top"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("下边距")]),s("td",[s("el-input-number",{attrs:{min:0,max:100,label:"px",size:"mini"},model:{value:t.opt.style.content.margin_bottom,callback:function(e){t.$set(t.opt.style.content,"margin_bottom",e)},expression:"opt.style.content.margin_bottom"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("内边距")]),s("td",[s("el-input-number",{attrs:{min:0,max:100,label:"px",size:"mini"},model:{value:t.opt.style.content.padding,callback:function(e){t.$set(t.opt.style.content,"padding",e)},expression:"opt.style.content.padding"}})],1)])])]),s("el-tab-pane",{attrs:{label:"小工具目录"}},[s("table",{staticClass:"wbs-form-table-sub"},[s("tr",[s("th",{staticClass:"row w6em"},[t._v("背景色")]),s("td",[s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.opt.style.widget.background_color,callback:function(e){t.$set(t.opt.style.widget,"background_color",e)},expression:"opt.style.widget.background_color"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("边框线")]),s("td",[s("el-input-number",{attrs:{min:0,max:20,label:"px",size:"mini"},model:{value:t.opt.style.widget.border_width,callback:function(e){t.$set(t.opt.style.widget,"border_width",e)},expression:"opt.style.widget.border_width"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("边框色")]),s("td",[s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.opt.style.widget.border_color,callback:function(e){t.$set(t.opt.style.widget,"border_color",e)},expression:"opt.style.widget.border_color"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("上边距")]),s("td",[s("el-input-number",{attrs:{min:0,max:100,label:"px",size:"mini"},model:{value:t.opt.style.widget.margin_top,callback:function(e){t.$set(t.opt.style.widget,"margin_top",e)},expression:"opt.style.widget.margin_top"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("下边距")]),s("td",[s("el-input-number",{attrs:{min:0,max:100,label:"px",size:"mini"},model:{value:t.opt.style.widget.margin_bottom,callback:function(e){t.$set(t.opt.style.widget,"margin_bottom",e)},expression:"opt.style.widget.margin_bottom"}})],1)]),s("tr",[s("th",{staticClass:"row"},[t._v("内边距")]),s("td",[s("el-input-number",{attrs:{min:0,max:100,label:"px",size:"mini"},model:{value:t.opt.style.widget.padding,callback:function(e){t.$set(t.opt.style.widget,"padding",e)},expression:"opt.style.widget.padding"}})],1)])])]),s("el-tab-pane",{attrs:{label:"自定义CSS"}},[s("div",[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.opt.custom_style,callback:function(e){t.$set(t.opt,"custom_style",e)},expression:"opt.custom_style"}})],1)])],1)],1)])]):t._e(),t.isPro?t._e():s("div",{staticClass:"getpro-mask"},[s("div",{staticClass:"mask-inner"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.doActivePro()}}},[t._v("获取PRO版本")]),s("p",{staticClass:"tips"},[t._v("* 激活PRO版本即可使用")])],1)]),s("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1),t.$cnf.is_pro?t._e():s("wbs-more-sources"),s("wbs-ctrl-bar",{on:{submit:t.updateData}})],1)])},a=[],l={name:"MagicPostTOC",data(){const t=this;return{wb_cnf:t.$cnf,formChanged:0,isLoaded:!1,isPro:t.$cnf.is_pro,opt:{},cnf:{}}},mounted(){this.loadData()},methods:{loadData(){const t=this;t.$api.getData({_ajax_nonce:t.$cnf._ajax_nonce,action:t.$cnf.action.act,op:"toc_setting"}).then(e=>{t.opt=e.opt,t.cnf=e.cnf,t.$nextTick(()=>{t.formChanged=1}),t.isLoaded=!0})},updateData(t){const e=this,s={_ajax_nonce:e.$cnf._ajax_nonce,action:e.$cnf.action.act,op:"toc_update",opt:e.opt};e.$api.saveData(s).then(s=>{e.$wbui.toast("设置保存成功"),e.formChanged=1,t&&t()})}},watch:{opt:{handler(){this.formChanged++},deep:!0}},beforeRouteLeave(t,e,s){const o=this;o.formChanged>1?o.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes(){return s(!1),o.updateData((function(){s()})),!1},no(){return s(),!1}}):s()}},n=l,i=s("2877"),c=Object(i["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports}}]);